// Copyright (c) Microsoft Corporation. All rights reserved.
//
// Licensed under the MIT License. See License.txt in the project root for license information.
// Code generated by Microsoft (R) Rust Code Generator. DO NOT EDIT.

use crate::generated::models::{Cat, Dog};
use azure_core::{fmt::SafeDebug, http::RequestContent, json::to_json, Result};
use serde::{Deserialize, Serialize};

#[doc = r#"Test discriminated union with inline discriminator (no envelope).
The discriminated union should serialize with discriminator property
injected directly into the variant object."#]
#[derive(Deserialize, Serialize, SafeDebug, Clone)]
#[serde(tag = "kind")]
pub enum PetInline {
    #[serde(rename = "cat")]
    Cat(Cat),

    #[serde(rename = "dog")]
    Dog(Dog),
}

#[doc = r#"Test discriminated union with inline discriminator and custom discriminator property name.
The discriminated union should serialize with custom discriminator property
injected directly into the variant object."#]
#[derive(Deserialize, Serialize, SafeDebug, Clone)]
#[serde(tag = "type")]
pub enum PetInlineWithCustomDiscriminator {
    #[serde(rename = "cat")]
    Cat(Cat),

    #[serde(rename = "dog")]
    Dog(Dog),
}

#[doc = r#"Test discriminated union with custom property names.
The discriminated union should serialize with custom discriminator
and envelope property names."#]
#[derive(Deserialize, Serialize, SafeDebug, Clone)]
#[serde(tag = "petType", content = "petData")]
pub enum PetWithCustomNames {
    #[serde(rename = "cat")]
    Cat(Cat),

    #[serde(rename = "dog")]
    Dog(Dog),
}

#[doc = r#"Test discriminated union with default envelope serialization.
The discriminated union should serialize with "kind" as discriminator
and "value" as envelope property."#]
#[derive(Deserialize, Serialize, SafeDebug, Clone)]
#[serde(tag = "kind", content = "value")]
pub enum PetWithEnvelope {
    #[serde(rename = "cat")]
    Cat(Cat),

    #[serde(rename = "dog")]
    Dog(Dog),
}

impl TryFrom<PetInline> for RequestContent<PetInline> {
    type Error = azure_core::Error;
    fn try_from(value: PetInline) -> Result<Self> {
        Ok(to_json(&value)?.into())
    }
}

impl TryFrom<PetInlineWithCustomDiscriminator>
    for RequestContent<PetInlineWithCustomDiscriminator>
{
    type Error = azure_core::Error;
    fn try_from(value: PetInlineWithCustomDiscriminator) -> Result<Self> {
        Ok(to_json(&value)?.into())
    }
}

impl TryFrom<PetWithCustomNames> for RequestContent<PetWithCustomNames> {
    type Error = azure_core::Error;
    fn try_from(value: PetWithCustomNames) -> Result<Self> {
        Ok(to_json(&value)?.into())
    }
}

impl TryFrom<PetWithEnvelope> for RequestContent<PetWithEnvelope> {
    type Error = azure_core::Error;
    fn try_from(value: PetWithEnvelope) -> Result<Self> {
        Ok(to_json(&value)?.into())
    }
}
