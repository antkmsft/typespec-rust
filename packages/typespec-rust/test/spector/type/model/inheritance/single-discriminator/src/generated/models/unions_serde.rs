// Copyright (c) Microsoft Corporation. All rights reserved.
//
// Licensed under the MIT License. See License.txt in the project root for license information.
// Code generated by Microsoft (R) Rust Code Generator. DO NOT EDIT.

use super::{Bird, BirdKind, Dinosaur, DinosaurKind, Eagle, Goose, SeaGull, Sparrow, TRex};
use azure_core::Value;
use serde::Deserialize;

impl<'de> Deserialize<'de> for BirdKind {
    fn deserialize<D>(deserializer: D) -> Result<Self, D::Error>
    where
        D: serde::Deserializer<'de>,
    {
        let value = Value::deserialize(deserializer)?;
        match value.get("kind").and_then(Value::as_str) {
            Some("eagle") => Eagle::deserialize(&value)
                .map(BirdKind::Eagle)
                .map_err(serde::de::Error::custom),
            Some("goose") => Goose::deserialize(&value)
                .map(BirdKind::Goose)
                .map_err(serde::de::Error::custom),
            Some("seagull") => SeaGull::deserialize(&value)
                .map(BirdKind::SeaGull)
                .map_err(serde::de::Error::custom),
            Some("sparrow") => Sparrow::deserialize(&value)
                .map(BirdKind::Sparrow)
                .map_err(serde::de::Error::custom),
            _ => Bird::deserialize(&value)
                .map(BirdKind::Bird)
                .map_err(serde::de::Error::custom),
        }
    }
}

impl<'de> Deserialize<'de> for DinosaurKind {
    fn deserialize<D>(deserializer: D) -> Result<Self, D::Error>
    where
        D: serde::Deserializer<'de>,
    {
        let value = Value::deserialize(deserializer)?;
        match value.get("kind").and_then(Value::as_str) {
            Some("t-rex") => TRex::deserialize(&value)
                .map(DinosaurKind::TRex)
                .map_err(serde::de::Error::custom),
            _ => Dinosaur::deserialize(&value)
                .map(DinosaurKind::Dinosaur)
                .map_err(serde::de::Error::custom),
        }
    }
}
