// Copyright (c) Microsoft Corporation. All rights reserved.
//
// Licensed under the MIT License. See License.txt in the project root for license information.
// Code generated by Microsoft (R) Rust Code Generator. DO NOT EDIT.

use super::{
    DatetimeResponseHeaderClientDefaultResult, DatetimeResponseHeaderClientRfc3339Result,
    DatetimeResponseHeaderClientRfc7231Result, DatetimeResponseHeaderClientUnixTimestampResult,
};
use azure_core::http::{headers::HeaderName, headers::Headers, Response};
use azure_core::{date, Result};
use time::OffsetDateTime;

const VALUE: HeaderName = HeaderName::from_static("value");

/// Provides access to typed response headers for [`DatetimeResponseHeaderClient::default()`](crate::generated::clients::DatetimeResponseHeaderClient::default())
pub trait DatetimeResponseHeaderClientDefaultResultHeaders: private::Sealed {
    fn value(&self) -> Result<Option<OffsetDateTime>>;
}

impl DatetimeResponseHeaderClientDefaultResultHeaders
    for Response<DatetimeResponseHeaderClientDefaultResult>
{
    fn value(&self) -> Result<Option<OffsetDateTime>> {
        Headers::get_optional_with(self.headers(), &VALUE, |h| date::parse_rfc7231(h.as_str()))
    }
}

/// Provides access to typed response headers for [`DatetimeResponseHeaderClient::rfc3339()`](crate::generated::clients::DatetimeResponseHeaderClient::rfc3339())
pub trait DatetimeResponseHeaderClientRfc3339ResultHeaders: private::Sealed {
    fn value(&self) -> Result<Option<OffsetDateTime>>;
}

impl DatetimeResponseHeaderClientRfc3339ResultHeaders
    for Response<DatetimeResponseHeaderClientRfc3339Result>
{
    fn value(&self) -> Result<Option<OffsetDateTime>> {
        Headers::get_optional_with(self.headers(), &VALUE, |h| date::parse_rfc3339(h.as_str()))
    }
}

/// Provides access to typed response headers for [`DatetimeResponseHeaderClient::rfc7231()`](crate::generated::clients::DatetimeResponseHeaderClient::rfc7231())
pub trait DatetimeResponseHeaderClientRfc7231ResultHeaders: private::Sealed {
    fn value(&self) -> Result<Option<OffsetDateTime>>;
}

impl DatetimeResponseHeaderClientRfc7231ResultHeaders
    for Response<DatetimeResponseHeaderClientRfc7231Result>
{
    fn value(&self) -> Result<Option<OffsetDateTime>> {
        Headers::get_optional_with(self.headers(), &VALUE, |h| date::parse_rfc7231(h.as_str()))
    }
}

/// Provides access to typed response headers for [`DatetimeResponseHeaderClient::unix_timestamp()`](crate::generated::clients::DatetimeResponseHeaderClient::unix_timestamp())
pub trait DatetimeResponseHeaderClientUnixTimestampResultHeaders: private::Sealed {
    fn value(&self) -> Result<Option<OffsetDateTime>>;
}

impl DatetimeResponseHeaderClientUnixTimestampResultHeaders
    for Response<DatetimeResponseHeaderClientUnixTimestampResult>
{
    fn value(&self) -> Result<Option<OffsetDateTime>> {
        Headers::get_optional_with(self.headers(), &VALUE, |h| {
            date::parse_unix_time(h.as_str())
        })
    }
}

mod private {
    use super::{
        DatetimeResponseHeaderClientDefaultResult, DatetimeResponseHeaderClientRfc3339Result,
        DatetimeResponseHeaderClientRfc7231Result, DatetimeResponseHeaderClientUnixTimestampResult,
    };
    use azure_core::http::Response;

    pub trait Sealed {}

    impl Sealed for Response<DatetimeResponseHeaderClientDefaultResult> {}
    impl Sealed for Response<DatetimeResponseHeaderClientRfc3339Result> {}
    impl Sealed for Response<DatetimeResponseHeaderClientRfc7231Result> {}
    impl Sealed for Response<DatetimeResponseHeaderClientUnixTimestampResult> {}
}
