// Copyright (c) Microsoft Corporation. All rights reserved.
//
// Licensed under the MIT License. See License.txt in the project root for license information.
// Code generated by Microsoft (R) Rust Code Generator. DO NOT EDIT.

use super::{
    DatetimeResponseHeaderClientDefaultResult, DatetimeResponseHeaderClientRfc3339Result,
    DatetimeResponseHeaderClientRfc7231Result, DatetimeResponseHeaderClientUnixTimestampResult,
};
use azure_core::{
    http::{
        headers::{HeaderName, Headers},
        NoFormat, Response,
    },
    time::{parse_rfc3339, parse_rfc7231, parse_unix_time, OffsetDateTime},
    Result,
};

const VALUE: HeaderName = HeaderName::from_static("value");

/// Provides access to typed response headers for [`DatetimeResponseHeaderClient::default()`](crate::generated::clients::DatetimeResponseHeaderClient::default())
pub trait DatetimeResponseHeaderClientDefaultResultHeaders: private::Sealed {
    fn value(&self) -> Result<Option<OffsetDateTime>>;
}

impl DatetimeResponseHeaderClientDefaultResultHeaders
    for Response<DatetimeResponseHeaderClientDefaultResult, NoFormat>
{
    fn value(&self) -> Result<Option<OffsetDateTime>> {
        Headers::get_optional_with(self.headers(), &VALUE, |h| parse_rfc7231(h.as_str()))
    }
}

/// Provides access to typed response headers for [`DatetimeResponseHeaderClient::rfc3339()`](crate::generated::clients::DatetimeResponseHeaderClient::rfc3339())
pub trait DatetimeResponseHeaderClientRfc3339ResultHeaders: private::Sealed {
    fn value(&self) -> Result<Option<OffsetDateTime>>;
}

impl DatetimeResponseHeaderClientRfc3339ResultHeaders
    for Response<DatetimeResponseHeaderClientRfc3339Result, NoFormat>
{
    fn value(&self) -> Result<Option<OffsetDateTime>> {
        Headers::get_optional_with(self.headers(), &VALUE, |h| parse_rfc3339(h.as_str()))
    }
}

/// Provides access to typed response headers for [`DatetimeResponseHeaderClient::rfc7231()`](crate::generated::clients::DatetimeResponseHeaderClient::rfc7231())
pub trait DatetimeResponseHeaderClientRfc7231ResultHeaders: private::Sealed {
    fn value(&self) -> Result<Option<OffsetDateTime>>;
}

impl DatetimeResponseHeaderClientRfc7231ResultHeaders
    for Response<DatetimeResponseHeaderClientRfc7231Result, NoFormat>
{
    fn value(&self) -> Result<Option<OffsetDateTime>> {
        Headers::get_optional_with(self.headers(), &VALUE, |h| parse_rfc7231(h.as_str()))
    }
}

/// Provides access to typed response headers for [`DatetimeResponseHeaderClient::unix_timestamp()`](crate::generated::clients::DatetimeResponseHeaderClient::unix_timestamp())
pub trait DatetimeResponseHeaderClientUnixTimestampResultHeaders: private::Sealed {
    fn value(&self) -> Result<Option<OffsetDateTime>>;
}

impl DatetimeResponseHeaderClientUnixTimestampResultHeaders
    for Response<DatetimeResponseHeaderClientUnixTimestampResult, NoFormat>
{
    fn value(&self) -> Result<Option<OffsetDateTime>> {
        Headers::get_optional_with(self.headers(), &VALUE, |h| parse_unix_time(h.as_str()))
    }
}

mod private {
    use super::{
        DatetimeResponseHeaderClientDefaultResult, DatetimeResponseHeaderClientRfc3339Result,
        DatetimeResponseHeaderClientRfc7231Result, DatetimeResponseHeaderClientUnixTimestampResult,
    };
    use azure_core::http::{NoFormat, Response};

    pub trait Sealed {}

    impl Sealed for Response<DatetimeResponseHeaderClientDefaultResult, NoFormat> {}
    impl Sealed for Response<DatetimeResponseHeaderClientRfc3339Result, NoFormat> {}
    impl Sealed for Response<DatetimeResponseHeaderClientRfc7231Result, NoFormat> {}
    impl Sealed for Response<DatetimeResponseHeaderClientUnixTimestampResult, NoFormat> {}
}
